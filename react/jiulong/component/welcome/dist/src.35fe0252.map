{"version":3,"sources":["src/react/component.js","src/react/create-element.js","src/react/index.js","src/react-dom/dom.js","src/react-dom/render.js","src/react-dom/index.js","src/index.js"],"names":["Component","props","isReactComponent","state","stateChange","Object","assign","renderComponent","createElement","tag","attrs","children","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","render","createComponent","component","inst","prototype","setComponentProps","base","renderer","_render","_component","vnode","undefined","String","textNode","document","createTextNode","console","log","keys","forEach","key","child","container","appendChild","Counter","React","ReactDOM","getElementById"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AExBD;;kBACe;AACbM,wBADa;AAEbd;AAFa","file":"src.35fe0252.map","sourceRoot":"..","sourcesContent":["class Component {\n  constructor (props = {}) {\n    this.isReactComponent = true;\n    this.state = {};\n    this.props = props;\n  }\n\n  setState( stateChange ) {\n      Object.assign( this.state, stateChange );\n      renderComponent( this );\n  }\n}\nexport default Component;","function createElement(tag, attrs, ...children) {\n  return {\n    tag,\n    attrs,\n    children\n  }\n}\n\nexport default createElement;","import Component from './component.js'\nimport createElement from './create-element.js'\n\nexport default {\n  createElement,\n  Component\n}","export function setAttribute(dom, name, value) {\n  if (name === 'className') name = 'class';\n  if (/on\\w+/.test(name)) {\n    name = name.toLowerCase();\n    dom[name] = value || '';\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string') {\n      dom.style.cssText = value || '';\n    } else if (value && typeof value === 'object') {\n      for (let name in value) {\n        dom.style[name] = typeof value[name] === 'number' ? value[name] + 'px' : value[name];\n      }\n    } else {\n      if (name in dom) {\n        dom[ name ] = value || '';\n      }\n      if (value) {\n        dom.setAttribute(name, value);\n      } else {\n        dom.removeAttribute(name, value);\n      }\n    }\n  }\n\n}","import { setAttribute } from './dom' \n\nfunction createComponent(component, props) {\n  let inst;\n\n  if (component.prototype && component.prototype.render) {\n    inst = new component(props);\n  } else {\n    // inst = new Component(props);\n  }\n  return inst;\n}\n\nfunction setComponentProps(component, props) {\n  renderComponent(component);\n}\n\nexport function renderComponent( component ) {\n  let base;\n  const renderer = component.render();\n  // console.log(renderer);\n  base = _render(renderer);\n  // console.log(base)\n  component.base = base;\n  base._component = component;\n}\n\nfunction _render (vnode) {\n  if ( vnode === undefined || vnode === null  || typeof vnode === 'boolean' ) vnode = ''\n  if (typeof vnode === 'number') vnode = String(vnode);\n  if (typeof vnode === 'string') {\n    let textNode = document.createTextNode(vnode);\n    return textNode;\n  }\n\n  if (typeof vnode.tag === 'function') {\n    // return;\n    const component = createComponent( vnode.tag, vnode.attrs );\n    console.log(component);\n    setComponentProps(component, vnode.attrs);\n    console.log(component.base)\n    return component.base;\n  }\n\n  const dom = document.createElement(vnode.tag);\n  if (vnode.attrs) {\n    Object.keys(vnode.attrs).forEach(key => {\n      const value = vnode.attrs[key];\n      setAttribute(dom, key, value);\n    });\n  }\n  \n  if (vnode.children) {\n    vnode.children.forEach(child => render(child, dom));\n  }\n\n\n\n  return dom;\n}\n\n\nexport function render (vnode, container) {\n  return container.appendChild(_render(vnode));\n}","import { render, renderComponent } from './render'\nexport default {\n  render,\n  renderComponent\n}","import React from './react'\nimport ReactDOM from './react-dom'\n\nclass Counter extends React.Component {\n  constructor (props) {\n    super(props);\n  }\n\n  render () {\n    return (\n      <div>\n      Counter\n      </div>\n    )\n  }\n}\n\nReactDOM.render(\n  <div className=\"a\" style=\"color: red;\">\n  hello world\n    <Counter />\n  </div>,\n  document.getElementById('root')\n);\n// const React = {\n//     createElement\n// }\n\n// const ReactDOM = {\n//     render: ( vnode, container ) => {\n//         container.innerHTML = '';\n//         return render( vnode, container );\n//     }\n// }\n\n// function createElement( tag, attrs, ...children ) {\n//     return {\n//         tag,\n//         attrs,\n//         children\n//     }\n// }\n\n// function render( vnode, container ) {\n\n//     if ( typeof vnode === 'string' ) {\n//         let textNode = document.createTextNode( vnode );\n//         return container.appendChild( textNode );\n//     }\n\n//     const dom = document.createElement( vnode.tag );\n\n//     if ( vnode.attrs ) {\n//         Object.keys( vnode.attrs ).forEach( key => {\n//             const value = vnode.attrs[ key ];\n//             setAttribute( dom, key, value );\n//         } );\n//     }\n\n//     vnode.children.forEach( child => render( child, dom ) );\n\n//     return container.appendChild( dom );\n// }\n\n// function setAttribute( dom, name, value ) {\n//     // 如果属性名是class，则改回className\n//     if ( name === 'className' ) name = 'class';\n\n//     // 如果属性名是onXXX，则是一个时间监听方法\n//     if ( /on\\w+/.test( name ) ) {\n//         name = name.toLowerCase();\n//         dom[ name ] = value || '';\n//     // 如果属性名是style，则更新style对象\n//     } else if ( name === 'style' ) {\n//         if ( !value || typeof value === 'string' ) {\n//             dom.style.cssText = value || '';\n//         } else if ( value && typeof value === 'object' ) {\n//             for ( let name in value ) {\n//                 // 可以通过style={ width: 20 }这种形式来设置样式，可以省略掉单位px\n//                 dom.style[ name ] = typeof value[ name ] === 'number' ? value[ name ] + 'px' : value[ name ];\n//             }\n//         }\n//     // 普通属性则直接更新属性\n//     } else {\n//         if ( name in dom ) {\n//             dom[ name ] = value || '';\n//         }\n//         if ( value ) {\n//             dom.setAttribute( name, value );\n//         } else {\n//             dom.removeAttribute( name, value );\n//         }\n//     }\n// }\n\n// function tick() {\n//     const element = (\n//         <div>\n//             <h1>Hello, world!</h1>\n//             <h2>It is {new Date().toLocaleTimeString()}.</h2>\n//         </div>\n//       );\n//     ReactDOM.render(\n//         element,\n//         document.getElementById( 'root' )\n//     );\n// }\n\n// setInterval( tick, 1000 );"]}